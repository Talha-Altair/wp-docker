version: '3'
services:
    mysql:
        image: mysql:8.3.0-oraclelinux8
        volumes:
            - ./data/mysql:/var/lib/mysql
        environment:
            - MYSQL_ROOT_PASSWORD=root1234
            - MYSQL_DATABASE=famistrywp
            - MYSQL_USER=famistry
            - MYSQL_PASSWORD=fam1234
        restart: unless-stopped
    wordpress:
        image: wordpress:6.4.2-php8.2-apache
        volumes:
            - ./data/html:/var/www/html
        depends_on:
            - mysql
        environment:
            - WORDPRESS_DB_HOST=mysql
            - MYSQL_ROOT_PASSWORD=root1234
            - WORDPRESS_DB_NAME=famistrywp
            - WORDPRESS_DB_USER=famistry
            - WORDPRESS_DB_PASSWORD=fam1234
            - WORDPRESS_TABLE_PREFIX=wp_
        links:
            - mysql
        restart: unless-stopped
    phpmyadmin:
        depends_on:
            - mysql
        image: phpmyadmin:5.2.1-apache
        restart: unless-stopped
        ports:
            - '9080:80'
        environment:
            - PMA_HOST=mysql
            - MYSQL_ROOT_PASSWORD=root1234
    nginx:
        image: nginx:alpine
        volumes:
            - ./nginx:/etc/nginx/conf.d
            - ./data/html:/var/www/html
        ports:
            - 5080:80
        links:
            - wordpress
